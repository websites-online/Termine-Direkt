<section class="section page demo-page">
  <div class="container">
    <div class="section-header demo-header">
      <h1 class="section-title">{{ company?.name || 'Reservierungsseite' }}</h1>
      <p class="section-lead" *ngIf="company">
        {{ company.address || 'Adresse folgt' }} · {{ company.hours || 'Öffnungszeiten folgen' }}
      </p>
      <p class="section-lead" *ngIf="!company">
        Reservierungsseite folgt.
      </p>
    </div>

    <div class="grid-2 demo-grid" *ngIf="company">
      <div class="card calendar-card">
        <h2>Kalender</h2>
        <div class="calendar-header">
          <button class="month-nav" type="button" (click)="prevMonth()" [disabled]="!canGoPrev">
            ‹
          </button>
          <span class="month-label">{{ currentMonthLabel }}</span>
          <button class="month-nav" type="button" (click)="nextMonth()" [disabled]="!canGoNext">
            ›
          </button>
        </div>
        <div class="calendar-weekdays">
          <span *ngFor="let day of weekdays">{{ day }}</span>
        </div>
        <div class="calendar-grid">
          <button
            class="day"
            type="button"
            *ngFor="let day of calendarDays"
            [class.muted]="day.muted"
            [class.active]="day.active"
            [class.today]="day.today"
            [disabled]="day.muted"
            (click)="selectDate(day)"
          >
            {{ day.label }}
          </button>
        </div>
        <p class="helptext">Datum auswählen.</p>
      </div>

      <div class="card details-card">
        <h2>{{ bookingTitle }}</h2>
        <p class="muted">{{ company.address || 'Adresse folgt' }}</p>
        <p class="muted">
          {{ company.hours || 'Öffnungszeiten folgen' }}
          <span *ngIf="company.breakHours"> · Pause: {{ company.breakHours }}</span>
        </p>
        <div class="slot-row">
          <button
            class="slot"
            type="button"
            *ngFor="let slot of slots"
            [class.active]="bookingForm.value.time === slot"
            [class.full]="isSlotFull(slot)"
            [class.soon]="isSlotTooSoon(slot)"
            [disabled]="isSlotFull(slot)"
            [attr.aria-disabled]="isSlotTooSoon(slot)"
            (click)="onSlotClick(slot)"
          >
            {{ slot }}
          </button>
        </div>
        <p class="helptext">Datum: {{ selectedDate }} · Zeit: {{ bookingForm.value.time }}</p>
        <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
        <form class="demo-form" [formGroup]="bookingForm" (ngSubmit)="submit()">
          <label>
            <span class="label">Name*</span>
            <input class="input" type="text" formControlName="name" placeholder="Vor- und Nachname" />
          </label>
          <label>
            <span class="label">E-Mail*</span>
            <input class="input" type="email" formControlName="email" placeholder="gast@mail.de" />
            <span class="error" *ngIf="bookingForm.get('email')?.touched && bookingForm.get('email')?.invalid">
              Bitte gültige E-Mail eingeben.
            </span>
          </label>
          <label>
            <span class="label">Telefon*</span>
            <input class="input" type="tel" formControlName="phone" placeholder="Telefonnummer" />
          </label>
          <label *ngIf="!isSalon">
            <span class="label">{{ guestCountLabel }}</span>
            <input class="input" type="number" min="1" formControlName="people" />
          </label>
          <label *ngIf="isSalon">
            <span class="label">Service*</span>
            <select class="input" formControlName="service">
              <option value="" disabled>Bitte wählen</option>
              <option *ngFor="let service of salonServices" [value]="service.value">
                {{ service.label }}
              </option>
            </select>
            <span class="error" *ngIf="bookingForm.get('service')?.touched && bookingForm.get('service')?.invalid">
              Pflichtfeld.
            </span>
          </label>
          <label>
            <span class="label">Notiz (optional)</span>
            <textarea class="textarea" formControlName="note" placeholder="Zusätzliche Hinweise"></textarea>
          </label>
          <button class="btn btn-primary" type="submit" [disabled]="isSubmitting">
            {{ isSubmitting ? 'Senden...' : bookingButtonLabel }}
          </button>
          <p class="helptext" *ngIf="successMessage">{{ successMessage }}</p>
        </form>
      </div>
    </div>
  </div>
</section>
<div class="reservation-modal" *ngIf="showThanksModal">
  <div class="reservation-modal__backdrop" (click)="closeThanksModal()"></div>
  <div class="reservation-modal__panel" role="dialog" aria-modal="true" aria-labelledby="reservation-modal-title">
  <div class="reservation-modal__badge">✓</div>
  <h3 id="reservation-modal-title">{{ bookingSuccessHeadline }}</h3>
  <p>{{ bookingConfirmText }}</p>
    <div class="reservation-modal__details">
      <div>
        <span>Datum</span>
        <strong>{{ lastReservationDate }}</strong>
      </div>
      <div>
        <span>Uhrzeit</span>
        <strong>{{ lastReservationTime }}</strong>
      </div>
    </div>
    <button class="btn btn-primary" type="button" (click)="closeThanksModal()">OK</button>
  </div>
</div>
<footer class="demo-footer-note">
  Erstellt von reserVino. Moderne Terminplanung leicht und günstig gemacht!
</footer>
